# 27강. N+1 문제와 N+1 문제가 발생하는 이유
- jpa 연관 관계 
  - User(1) - (N) UserLoanHistory
    - jpa findAll() 실행
      - 모든 유저 조회
      - 유저별 UserLoanHistory 정보를 가져온다
    - N + 1
      - 최초 모든 유저 select 쿼리 (1회)
      - Loop를 통해 유저별 히스토리 select (N회)
      - 유저가 4명이라고 가정한다면 총 5회 발생
- 왜 N + 1 발생할까?
  - JPA 1:N 연관관계 동작 원리
    - 최초 User 로딩시 프록시 List<UserLoanHistory> 객체가 설정된다.
      - Lazy Loading
        - 진짜 객체를 들고 있다면, 상황에 따라 비효율!
        - 프록시 객체를 들고 있다가, 실제 사용 할 때 진짜 객체가 조회된다.
  - SQL의 join query 이해가 필요하다.