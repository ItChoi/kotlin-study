# 22강. Enum Class를 활용해 책의 분야 리팩토링 하기

## 기존 구조 문제점 1
- 요청을 검증하고 있지 않다.
  - type: String -> 어떤 문자열이 와도 등록이 가능하다. 
- 코드만 보았을 때 DB 테이블에 어떤 값이 들어가는지 알 수 없다.
- 검증 로직을 변수마다 작성하기 번거롭다.
- type 추가마다 새 로직 작성이 번거롭다.
  - 책 대출시 분야별로 이벤트 점수 부여 요구사항 추가시..?
  - String 타입으로 관리할 경우 이벤트 로직에 점수가 붙어야 한다.
    - 누락 가능성
    - 오타 가능성
    - 다른 타입이 없는데도 else 로직 작성
- type을 String이 아니라, enum으로 관리한다!
- enum의 패키지 위치는?
  - Book 도메인과 동일한 패키지에 enum 클래스 생성 (강의 - 선택)
  - Book 도메인 가장 하단에 enum class 추가
  - type 패키지 구성 
- enum통한 기존 문제 해결
  - String이 아닌 enum을 통한 변수 자동 검증 가능
  - DB 값 체크 가능
  - 주석 적절히 활용 -> 유지보수 간편
  - type 추가 및 점수 추가시 프로퍼티 추가
    - 다형성 활용 클래스인 enum -> 코드 분기를 줄여준다.
    - 불필요 else 코드 제거 가능
    - type safe 하게 코드 작성 가능
    - 새 타입 추가시 프로퍼티를 절대 빠뜨릴 수 없다.

## 추가 개선 필요
- Enum -> DB 데이터가 어떻게 들어갈까?
  - BookType.COMPUTER 으로 값을 넣었는데 DB에 값은 0으로 들어가 있다. (0번 째 순서)
  - enum -> DB 숫자 저장시 문제
    - enum 순서 변경시 아주 큰 일 발생
    - enum 추가 삭제에 매우 제한적
  - @Enumerated(EnumType.STRING) 사용 필수!